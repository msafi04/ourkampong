{% extends 'core/base.html' %}

{% block title %}{{ item.title }}{% endblock %}

{% block content %}
    <div class="container">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message.message }} <i class="fas fa-thumbs-up"></i>
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                </div>
            {% endfor %}
        {% endif %}
        {% for item in item_detail %}
            <h3 class="title">{{ item.title }}</h3>
            <hr>
            <div class="box row">
                <div class="col-md-6">
                    {% if item.image %}
                        <figure class="image is-4by3 img-fluid mb-4">
                            <img class="card-img" src="{{ item.image.url }}">
                        </figure>
                    {% endif %}
                </div>
                <div class="col-md-6">
                    <h3 class="title" style="text-align:left; font-size: 25px">{{ item.title }} 
                        <sup><span class="badge rounded-pill bg-primary pull-right" style="position: relative; font-size: 10px; top: -7px; left: -1px">{{ item.label }}</span></sup>
                    </h3>
                    {% if item.status %}
                        <span class="badge rounded-pill bg-success" style="position: relative; font-size: 10px; top: -12px; left: -1px">
                            Available
                        </span>
                    {% else %}
                        <span class="badge rounded-pill bg-info" style="position: relative; font-size: 10px; top: -12px; left: -1px">
                            Not Available
                        </span>
                    {% endif %}
                    <h1 class="subtitle">${{ item.price }}</h1>

                    <p class="mb-2">
                        <span class="tag is-dark" style="font-size: 15px">{{ item.member }}</span>
                        {% if request.user != item.member %}
                            <a href="{% url 'new_message' item.member item.cat_slug item.slug %}" class="dm-user" style=" color: black">
                                <i class='fas fa-comments' style='font-size: 28px;'></i>
                            </a>
                        {% endif %}
                    </p>
                    <p class="mb-5 text-muted" style="font-size: small; margin-bottom: 0px">Listed On: {{ item.date_added }}</p>
                    <hr>
                    <strong>Description: </strong>
                    <div class="desc" >{{ item.description }}</div>
                    <hr>
                </div>
            </div>
            <form action="{% url 'like_item' item.cat_slug item.slug %}" method="POST">
                {% csrf_token %}
                <button type="submit" name="item_id" value="{{ item.id }}" 
                class="btn btn{% if total_likes != 0 %}-outline{% endif %}-info p-1 border-0 btn-sm"
                data-toggle="tooltip" data-placement="top" title="Like">
                    {% if total_likes > 0 %}
                        {{ total_likes }} 
                    {% endif %}
                    <i class="fas fa-thumbs-up"></i>
                </button>
            </form>

            <hr>
            <a href="#" class="btn btn-outline-info is-capitalized">Interested</a>
            <a href="#" class="btn btn-outline-primary is-capitalized">Thank You <i class="fas fa-handshake"></i></a>
            <a href="{% url 'member/donate.html' %}" class="btn btn-outline-info is-capitalized">Donate <i class="fas fa-donate"></i></a>
            <hr>

            {% if request.user == item.member %}
                <a href="{% url 'core/homepage' %}" class="btn btn-outline-primary is-capitalized"><i class="fas fa-home"></i></a>
                <a href="{% url 'member/member_admin.html' %}" class="btn btn-outline-warning is-capitalized"><i class="fas fa-user-check"></i></a>
                <a href="{% url 'member/edit_item.html' item.pk %}" class="btn btn-outline-info is-capitalized"><i class="fas fa-pencil-alt"></i></a>
                <a href="{% url 'delete_item' item.pk %}" class="btn btn-outline-danger is-capitalized" onclick="return confirm('Are you sure you want to delete this?')">
                    <i class="far fa-trash-alt"></i>
                </a>
            {% else %}
                <a href="{% url 'core/homepage' %}" class="btn btn-outline-primary is-capitalized">Home</a>
            {% endif %}
        {% endfor %}
    </div>
{% endblock %}